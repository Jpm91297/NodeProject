(this.webpackJsonprecipes=this.webpackJsonprecipes||[]).push([[0],{21:function(e,t,a){e.exports=a(63)},26:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(18),l=a.n(r),s=(a(26),a(1)),i=a(8),o=a(3),m=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],r=t[1];return c.a.createElement("div",{id:"homepage",className:"text-center",style:{height:"95vh"}},c.a.createElement("div",{className:"jumbotron"},c.a.createElement("h2",{className:"mt-5 display-4"},"Welcome to the Recipes Home Page!"),c.a.createElement("p",{className:"lead"},"Search for recipes, add them to your profile, and more!"),c.a.createElement("hr",{className:"w-50"}),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-3"}),c.a.createElement("div",{className:"col-md-6"},c.a.createElement("form",{className:"",action:"/search",method:"GET"},c.a.createElement("div",{className:"input-group mx-auto"},c.a.createElement("input",{value:a,name:"search",onChange:function(e){return r(e.target.value)},type:"text",className:"form-control",placeholder:"Enter your search"}),c.a.createElement("div",{className:"input-group-append"},c.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Search"))))),c.a.createElement("div",{className:"col-3"}))))},u=a(19),d=a.n(u),p=function(e){var t=e.url,a=e.user,r=e.authenticated,l=e.id,i=e.setUserRecipes,o=Object(n.useState)(!1),m=Object(s.a)(o,2),u=m[0],d=m[1];return Object(n.useEffect)((function(){-1!==a.recipes.indexOf(l)&&d(!0)}),[a,l]),c.a.createElement(c.a.Fragment,null,u?c.a.createElement("button",{className:"float-right mr-2 btn btn-secondary btn-sm",disabled:!0},"\xa0\u2713\xa0"):c.a.createElement(c.a.Fragment,null,r?c.a.createElement("button",{className:"float-right mr-2 btn btn-success btn-sm",onClick:function(){fetch("".concat(t,"/addRecipe"),{method:"post",body:JSON.stringify({recipe:l}),credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0}}).then((function(e){return e.json()})).then((function(e){"fail"===e.message?console.log("failed to add"):(i(e.user.recipeIDs),d(!0))})).catch((function(e){console.log(e)}))}},"\xa0+\xa0"):c.a.createElement("span",null)))},E=function(e){var t=e.recipe;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"media"},c.a.createElement("img",{className:"mr-3",height:"100px;",src:t.image}),c.a.createElement("div",{className:"media-body"},c.a.createElement("h5",{className:"mt-0"},c.a.createElement("a",{className:"",href:t.sourceUrl},t.title)),c.a.createElement("p",{className:""},"Ready in ",t.readyInMinutes," minutes. Serves ",t.servings))),c.a.createElement("div",{className:"btn-group mb-1 mt-2"},c.a.createElement("button",{className:"btn btn-primary","data-toggle":"collapse","data-target":"#collapse"+t.id},"Summary"),c.a.createElement("button",{className:"btn btn-primary","data-toggle":"collapse","data-target":"#collapsetwo"+t.id},"Nutrition")),c.a.createElement("div",{id:"accordion"+t.id},c.a.createElement("div",{className:"collapse",id:"collapse"+t.id,"data-parent":"#accordion"+t.id},c.a.createElement("div",{className:"card card-body"},c.a.createElement("p",{dangerouslySetInnerHTML:{__html:t.summary}}))),c.a.createElement("div",{className:"collapse",id:"collapsetwo"+t.id,"data-parent":"#accordion"+t.id},c.a.createElement("div",{className:"card card-body"},c.a.createElement("table",{className:"table"},c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("td",null,"Calories:"),c.a.createElement("td",null,t.nutrition.nutrients[0].amount)),c.a.createElement("tr",null,c.a.createElement("td",null,"Fat:"),c.a.createElement("td",null,t.nutrition.nutrients[1].amount," ",t.nutrition.nutrients[1].unit)),c.a.createElement("tr",null,c.a.createElement("td",null,"Saturated Fat:"),c.a.createElement("td",null,t.nutrition.nutrients[2].amount," ",t.nutrition.nutrients[2].unit)),c.a.createElement("tr",null,c.a.createElement("td",null,"Carbohydrates:"),c.a.createElement("td",null,t.nutrition.nutrients[3].amount," ",t.nutrition.nutrients[3].unit)),c.a.createElement("tr",null,c.a.createElement("td",null,"Sugar:"),c.a.createElement("td",null,t.nutrition.nutrients[5].amount," ",t.nutrition.nutrients[5].unit)),c.a.createElement("tr",null,c.a.createElement("td",null,"Cholesterol:"),c.a.createElement("td",null,t.nutrition.nutrients[6].amount," ",t.nutrition.nutrients[6].unit)),c.a.createElement("tr",null,c.a.createElement("td",null,"Sodium:"),c.a.createElement("td",null,t.nutrition.nutrients[7].amount," ",t.nutrition.nutrients[7].unit)),c.a.createElement("tr",null,c.a.createElement("td",null,"Protein:"),c.a.createElement("td",null,t.nutrition.nutrients[8].amount," ",t.nutrition.nutrients[8].unit))))))))},h=a(10),b=a.n(h),f=function(e){var t=e.url,a=e.user,r=e.authenticated,l=e.setUserRecipes,i=Object(n.useState)({results:[]}),m=Object(s.a)(i,2),u=m[0],h=m[1],f=Object(n.useState)(!1),g=Object(s.a)(f,2),v=g[0],N=g[1],j=Object(n.useState)(!0),y=Object(s.a)(j,2),O=y[0],w=y[1],S=Object(n.useState)(0),C=Object(s.a)(S,2),R=C[0],x=C[1],k=d.a.parse(Object(o.f)().search).search,A=function(e){N(!1),fetch("https://api.spoonacular.com/recipes/complexSearch?query=".concat(e,"&number=5&offset=").concat(R,"&apiKey=b4eb8132e6de41dbae752d1fd776be77&addRecipeNutrition=true&addRecipeInformation=true")).then((function(e){return e.json()})).then((function(e){if(402===e.code)throw new Error;h(e),w(!1)})).catch((function(e){N(!0)})),x(R+5)};return Object(n.useEffect)((function(){w(!0),A(k)}),[k]),O?(console.log("loading"),c.a.createElement("div",{className:"container clearfix"},c.a.createElement("h2",{className:"text-center"},"Loading Results: "),c.a.createElement("div",{className:"d-flex justify-content-center"},c.a.createElement(b.a,{type:"TailSpin",color:"#000000",height:100,width:100})))):c.a.createElement("div",{className:"container clearfix"},c.a.createElement("h2",{className:"text-center"},'Showing Results for "',k,'": '),O?c.a.createElement("p",null,"Loading . . ."):c.a.createElement(c.a.Fragment,null,v?c.a.createElement("p",null,"there was and error"):c.a.createElement(c.a.Fragment,null,c.a.createElement("ul",{className:"list-group"},u.results.map((function(e,n){return c.a.createElement("li",{key:n,className:"list-group-item "},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-11"},c.a.createElement(E,{recipe:e})),c.a.createElement("div",{className:"col-1"},c.a.createElement(p,{url:t,user:a,authenticated:r,id:e.id,setUserRecipes:l}))))}))),c.a.createElement("button",{className:"btn btn-primary float-right mt-2 mr-4",onClick:function(){return A(k)}},"See More Results"))))},g=function(e){var t=e.url;return c.a.createElement("div",{className:"container",style:{height:"80vh"}},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-3"}),c.a.createElement("div",{className:"col-6"},c.a.createElement("h2",null,"Welcome to Recipes!"),c.a.createElement("p",null,"Login to gain access to saving recipes and more!"),c.a.createElement("button",{className:"btn btn-primary",onClick:function(){window.open("".concat(t,"/api/auth/google"),"_self")}},"Sign in with google")),c.a.createElement("div",{className:"col-3"})))},v=function(e){var t=e.url,a=e.id,r=e.setUserRecipes,l=Object(n.useState)(!1),i=Object(s.a)(l,2),o=i[0],m=i[1];return c.a.createElement(c.a.Fragment,null,o?c.a.createElement("button",{className:"float-right mr-2 btn btn-secondary btn-sm",disabled:!0},"\xa0\u2713\xa0"):c.a.createElement("button",{className:"float-right mr-2 btn btn-danger btn-sm",onClick:function(){fetch("".concat(t,"/api/removeRecipe"),{method:"post",body:JSON.stringify({recipe:a}),credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0}}).then((function(e){return e.json()})).then((function(e){"fail"===e.message?console.log("failed to remove"):(r(e.user.recipeIDs),m(!0))})).catch((function(e){console.log(e)}))}},"\xa0-\xa0"))},N=function(e){var t=e.url,a=e.user,r=e.authenticated,l=e.setUserRecipes,i=Object(n.useState)([]),o=Object(s.a)(i,2),m=o[0],u=o[1],d=Object(n.useState)(!1),p=Object(s.a)(d,2),h=p[0],f=p[1],g=Object(n.useState)(!1),N=Object(s.a)(g,2),j=N[0],y=N[1],O=Object(n.useState)(!1),w=Object(s.a)(O,2),S=w[0],C=w[1];return c.a.createElement("div",{className:"container",style:S?{height:"100%"}:{height:"95vh"}},r?c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",{className:"text-center"},"Welcome, ",a.name.givenName),S?c.a.createElement("span",null):c.a.createElement("button",{className:"btn btn-primary",onClick:function(){if(0!==a.recipes.length){C(!0),f(!0);var e="";a.recipes.forEach((function(t,n){n===a.recipes.length-1?e+=t:e+=t+","})),fetch("https://api.spoonacular.com/recipes/informationBulk?ids=".concat(e,"&apiKey=b4eb8132e6de41dbae752d1fd776be77&includeNutrition=true")).then((function(e){return e.json()})).then((function(e){if(402===e.code||400===e.code)throw new Error;u(e),f(!1)})).catch((function(e){console.log("err fetching from api"),y(!0)}))}}},"View Saved Recipes")):c.a.createElement("h1",{className:"text-center"},"Welcome, please login to view profile"),S?c.a.createElement("ul",{id:"recipe-list",className:"list-group mt-3"},j?c.a.createElement("p",null,"there was an error"):c.a.createElement(c.a.Fragment,null,h?c.a.createElement("div",{className:"d-flex justify-content-center"},c.a.createElement(b.a,{type:"TailSpin",color:"#000000",height:100,width:100})):m.map((function(e,a){return c.a.createElement("li",{key:a,className:"list-group-item"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-11"},c.a.createElement(E,{recipe:e})),c.a.createElement("div",{className:"col-1"},c.a.createElement(v,{url:t,id:e.id,setUserRecipes:l}))))})))):c.a.createElement("span",null))},j=function(e){var t=e.user,a=e.authenticated;return c.a.createElement("nav",{className:"navbar sticky-top navbar-expand-lg navbar-light"},c.a.createElement(i.b,{className:"navbar-brand",to:"/"},"Recipes"),c.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},c.a.createElement("span",{className:"navbar-toggler-icon"})),c.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},c.a.createElement("ul",{className:"navbar-nav mr-auto"},c.a.createElement("li",{className:"nav-item"},c.a.createElement(i.b,{className:"nav-link",to:"/"},"Home")),a?c.a.createElement("li",{className:"nav-item"},c.a.createElement(i.b,{className:"nav-link",to:"/profile"},"Profile")):c.a.createElement("span",null)),a?c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:"navbar-text mr-2"},"Welcome, ",t.name.givenName),c.a.createElement(i.b,{className:"btn btn-secondary my-2 my-sm-0",to:"/logout"},"Logout")):c.a.createElement(i.b,{className:"btn btn-secondary my-2 my-sm-0",to:"/login"},"Login")))},y=function(e){var t=e.url,a=e.setAuthenticated,r=Object(n.useState)(""),l=Object(s.a)(r,2),o=l[0],m=l[1];return Object(n.useEffect)((function(){fetch("".concat(t,"/api/logout"),{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0}}).then((function(e){if(console.log("response: ".concat(e)),200===e.status)return e.json();throw new Error("failed to authenticate user")})).then((function(e){m(e.message),a(!1)})).catch((function(e){console.log(e)}))}),[]),c.a.createElement("div",{className:"container",style:{height:"80vh"}},c.a.createElement("div",{className:"alert alert-success"},o,c.a.createElement(i.b,{className:"ml-3 btn btn-primary",to:"/"},"Return to Home Page")))},O=function(){return c.a.createElement("div",{className:"container mt-3 text-center mb-3"},c.a.createElement("hr",null),c.a.createElement("p",null,"Website by Cam Gallucci 2020"),c.a.createElement("a",{href:"http://spoonacular.com"},"View API used"),c.a.createElement("span",null,"\xa0\xa0|\xa0\xa0"),c.a.createElement("a",{href:"http://github.com/cgallucci99/NodeProject"},"View Github"))};var w=function(){var e,t=Object(n.useState)(""),a=Object(s.a)(t,2),r=a[0],l=a[1],u=Object(n.useState)({}),d=Object(s.a)(u,2),p=d[0],E=d[1],h=Object(n.useState)([]),b=Object(s.a)(h,2),v=b[0],w=b[1],S=Object(n.useState)(null),C=Object(s.a)(S,2),R=C[0],x=C[1],k=Object(n.useState)(!1),A=Object(s.a)(k,2),F=A[0],T=A[1];return e="http://ec2-13-59-8-125.us-east-2.compute.amazonaws.com",Object(n.useEffect)((function(){fetch("".concat(e,"/api/auth/login/success"),{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0}}).then((function(e){if(200===e.status)return e.json();throw new Error("failed to authenticate user")})).then((function(e){T(!0),l(e.user._id),E(e.user.name),w(e.user.recipeIDs)})).catch((function(e){T(!1),x("Failed to authenticate user"),console.log(R)}))}),[]),c.a.createElement(i.a,null,c.a.createElement(j,{user:{name:p,id:r,recipes:v},authenticated:F}),c.a.createElement(o.c,null,c.a.createElement(o.a,{path:"/",component:m,exact:!0}),c.a.createElement(o.a,{path:"/search",render:function(t){return c.a.createElement(f,Object.assign({},t,{url:e,user:{name:p,id:r,recipes:v},authenticated:F,setUserRecipes:w}))}}),c.a.createElement(o.a,{path:"/login",render:function(t){return c.a.createElement(g,Object.assign({},t,{url:e}))}}),c.a.createElement(o.a,{path:"/profile",render:function(t){return c.a.createElement(N,Object.assign({},t,{url:e,user:{name:p,id:r,recipes:v},authenticated:F,setUserRecipes:w}))}}),c.a.createElement(o.a,{path:"/logout",render:function(t){return c.a.createElement(y,{url:e,setAuthenticated:T})}})),c.a.createElement(O,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[21,1,2]]]);
//# sourceMappingURL=main.d2b15776.chunk.js.map
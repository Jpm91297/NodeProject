(this.webpackJsonprecipes=this.webpackJsonprecipes||[]).push([[0],{25:function(e,t,a){e.exports=a(70)},30:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(10),r=a.n(c),s=(a(30),a(1)),i=a(7),o=a(3),m=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1];return l.a.createElement("div",{id:"homepage",className:"text-center",style:{height:"95vh"}},l.a.createElement("div",{className:"jumbotron"},l.a.createElement("h2",{className:"mt-5 display-4"},"Welcome to the Recipes Home Page!"),l.a.createElement("p",{className:"lead"},"Search for recipes, add them to your profile, and more!"),l.a.createElement("hr",{className:"w-50"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-3"}),l.a.createElement("div",{className:"col-md-6"},l.a.createElement("form",{className:"",action:"/search",method:"GET"},l.a.createElement("div",{className:"input-group mx-auto"},l.a.createElement("input",{value:a,name:"search",onChange:function(e){return c(e.target.value)},type:"text",className:"form-control",placeholder:"Enter your search"}),l.a.createElement("div",{className:"input-group-append"},l.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Search"))))),l.a.createElement("div",{className:"col-3"}))))},u=a(21),d=a.n(u),p=function(e){var t=e.url,a=e.user,c=e.authenticated,r=e.id,i=e.setUserRecipes,o=Object(n.useState)(!1),m=Object(s.a)(o,2),u=m[0],d=m[1];return Object(n.useEffect)((function(){-1!==a.recipes.indexOf(r)&&d(!0)}),[a,r]),l.a.createElement(l.a.Fragment,null,u?l.a.createElement("button",{className:"float-right mr-2 btn btn-secondary btn-sm",disabled:!0},"\xa0\u2713\xa0"):l.a.createElement(l.a.Fragment,null,c?l.a.createElement("button",{className:"float-right mr-2 btn btn-success btn-sm",onClick:function(){fetch("".concat(t,"/addRecipe"),{method:"post",body:JSON.stringify({recipe:r}),credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0}}).then((function(e){return e.json()})).then((function(e){"fail"===e.message?console.log("failed to add"):(i(e.user.recipeIDs),d(!0))})).catch((function(e){console.log(e)}))}},"\xa0+\xa0"):l.a.createElement("span",null)))},E=function(e){var t=e.recipe;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"media"},l.a.createElement("img",{className:"mr-3",height:"100px;",src:t.image}),l.a.createElement("div",{className:"media-body"},l.a.createElement("h5",{className:"mt-0"},l.a.createElement("a",{className:"",href:t.sourceUrl},t.title)),l.a.createElement("p",{className:""},"Ready in ",t.readyInMinutes," minutes. Serves ",t.servings))),l.a.createElement("div",{className:"btn-group mb-1 mt-2"},l.a.createElement("button",{className:"btn btn-primary","data-toggle":"collapse","data-target":"#collapse"+t.id},"Summary"),l.a.createElement("button",{className:"btn btn-primary","data-toggle":"collapse","data-target":"#collapsetwo"+t.id},"Nutrition")),l.a.createElement("div",{id:"accordion"+t.id},l.a.createElement("div",{className:"collapse",id:"collapse"+t.id,"data-parent":"#accordion"+t.id},l.a.createElement("div",{className:"card card-body"},l.a.createElement("p",{dangerouslySetInnerHTML:{__html:t.summary}}))),l.a.createElement("div",{className:"collapse",id:"collapsetwo"+t.id,"data-parent":"#accordion"+t.id},l.a.createElement("div",{className:"card card-body"},l.a.createElement("table",{className:"table"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Calories:"),l.a.createElement("td",null,t.nutrition.nutrients[0].amount)),l.a.createElement("tr",null,l.a.createElement("td",null,"Fat:"),l.a.createElement("td",null,t.nutrition.nutrients[1].amount," ",t.nutrition.nutrients[1].unit)),l.a.createElement("tr",null,l.a.createElement("td",null,"Saturated Fat:"),l.a.createElement("td",null,t.nutrition.nutrients[2].amount," ",t.nutrition.nutrients[2].unit)),l.a.createElement("tr",null,l.a.createElement("td",null,"Carbohydrates:"),l.a.createElement("td",null,t.nutrition.nutrients[3].amount," ",t.nutrition.nutrients[3].unit)),l.a.createElement("tr",null,l.a.createElement("td",null,"Sugar:"),l.a.createElement("td",null,t.nutrition.nutrients[5].amount," ",t.nutrition.nutrients[5].unit)),l.a.createElement("tr",null,l.a.createElement("td",null,"Cholesterol:"),l.a.createElement("td",null,t.nutrition.nutrients[6].amount," ",t.nutrition.nutrients[6].unit)),l.a.createElement("tr",null,l.a.createElement("td",null,"Sodium:"),l.a.createElement("td",null,t.nutrition.nutrients[7].amount," ",t.nutrition.nutrients[7].unit)),l.a.createElement("tr",null,l.a.createElement("td",null,"Protein:"),l.a.createElement("td",null,t.nutrition.nutrients[8].amount," ",t.nutrition.nutrients[8].unit))))))))},h=a(13),b=a.n(h),g=function(e){var t=e.url,a=e.user,c=e.authenticated,r=e.setUserRecipes,i=Object(n.useState)({results:[]}),m=Object(s.a)(i,2),u=m[0],h=m[1],g=Object(n.useState)(!1),f=Object(s.a)(g,2),v=f[0],N=f[1],j=Object(n.useState)(!0),y=Object(s.a)(j,2),O=y[0],w=y[1],S=Object(n.useState)(0),x=Object(s.a)(S,2),C=x[0],R=x[1],F=d.a.parse(Object(o.f)().search).search,k=function(e){N(!1),fetch("https://api.spoonacular.com/recipes/complexSearch?query=".concat(e,"&number=5&offset=").concat(C,"&apiKey=b4eb8132e6de41dbae752d1fd776be77&addRecipeNutrition=true&addRecipeInformation=true")).then((function(e){return e.json()})).then((function(e){if(402===e.code)throw new Error;h(e),w(!1)})).catch((function(e){N(!0)})),R(C+5)};return Object(n.useEffect)((function(){w(!0),k(F)}),[F]),O?(console.log("loading"),l.a.createElement("div",{className:"container clearfix"},l.a.createElement("h2",{className:"text-center"},"Loading Results: "),l.a.createElement("div",{className:"d-flex justify-content-center"},l.a.createElement(b.a,{type:"TailSpin",color:"#000000",height:100,width:100})))):l.a.createElement("div",{className:"container clearfix"},l.a.createElement("h2",{className:"text-center"},'Showing Results for "',F,'": '),O?l.a.createElement("p",null,"Loading . . ."):l.a.createElement(l.a.Fragment,null,v?l.a.createElement("p",null,"there was and error"):l.a.createElement(l.a.Fragment,null,l.a.createElement("ul",{className:"list-group"},u.results.map((function(e,n){return l.a.createElement("li",{key:n,className:"list-group-item "},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-11"},l.a.createElement(E,{recipe:e})),l.a.createElement("div",{className:"col-1"},l.a.createElement(p,{url:t,user:a,authenticated:c,id:e.id,setUserRecipes:r}))))}))),l.a.createElement("button",{className:"btn btn-primary float-right mt-2 mr-4",onClick:function(){return k(F)}},"See More Results"))))},f=function(e){var t=e.url;return l.a.createElement("div",{className:"container",style:{height:"80vh"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-3"}),l.a.createElement("div",{className:"col-6"},l.a.createElement("h2",null,"Welcome to Recipes!"),l.a.createElement("p",null,"Login to gain access to saving recipes and more!"),l.a.createElement("button",{className:"btn btn-primary",onClick:function(){window.open("".concat(t,"/api/auth/google"),"_self")}},"Sign in with google")),l.a.createElement("div",{className:"col-3"})))},v=function(e){var t=e.url,a=e.id,c=e.setUserRecipes,r=Object(n.useState)(!1),i=Object(s.a)(r,2),o=i[0],m=i[1];return l.a.createElement(l.a.Fragment,null,o?l.a.createElement("button",{className:"float-right mr-2 btn btn-secondary btn-sm",disabled:!0},"\xa0\u2713\xa0"):l.a.createElement("button",{className:"float-right mr-2 btn btn-danger btn-sm",onClick:function(){fetch("".concat(t,"/api/removeRecipe"),{method:"post",body:JSON.stringify({recipe:a}),credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0}}).then((function(e){return e.json()})).then((function(e){"fail"===e.message?console.log("failed to remove"):(c(e.user.recipeIDs),m(!0))})).catch((function(e){console.log(e)}))}},"\xa0-\xa0"))},N=function(e){var t=e.url,a=e.user,c=e.authenticated,r=e.setUserRecipes,i=Object(n.useState)([]),o=Object(s.a)(i,2),m=o[0],u=o[1],d=Object(n.useState)(!1),p=Object(s.a)(d,2),h=p[0],g=p[1],f=Object(n.useState)(!1),N=Object(s.a)(f,2),j=N[0],y=N[1],O=Object(n.useState)(!1),w=Object(s.a)(O,2),S=w[0],x=w[1];return l.a.createElement("div",{className:"container",style:S?{height:"100%"}:{height:"95vh"}},c?l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",{className:"text-center"},"Welcome, ",a.name.givenName),S?l.a.createElement("span",null):l.a.createElement("button",{className:"btn btn-primary",onClick:function(){if(0!==a.recipes.length){x(!0),g(!0);var e="";a.recipes.forEach((function(t,n){n===a.recipes.length-1?e+=t:e+=t+","})),fetch("https://api.spoonacular.com/recipes/informationBulk?ids=".concat(e,"&apiKey=b4eb8132e6de41dbae752d1fd776be77&includeNutrition=true")).then((function(e){return e.json()})).then((function(e){if(402===e.code||400===e.code)throw new Error;u(e),g(!1)})).catch((function(e){console.log("err fetching from api"),y(!0)}))}}},"View Saved Recipes")):l.a.createElement("h1",{className:"text-center"},"Welcome, please login to view profile"),S?l.a.createElement("ul",{id:"recipe-list",className:"list-group mt-3"},j?l.a.createElement("p",null,"there was an error"):l.a.createElement(l.a.Fragment,null,h?l.a.createElement("div",{className:"d-flex justify-content-center"},l.a.createElement(b.a,{type:"TailSpin",color:"#000000",height:100,width:100})):m.map((function(e,a){return l.a.createElement("li",{key:a,className:"list-group-item"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-11"},l.a.createElement(E,{recipe:e})),l.a.createElement("div",{className:"col-1"},l.a.createElement(v,{url:t,id:e.id,setUserRecipes:r}))))})))):l.a.createElement("span",null))},j=function(e){var t=e.user,a=e.authenticated;return l.a.createElement("nav",{className:"navbar sticky-top navbar-expand-lg navbar-light"},l.a.createElement(i.b,{className:"navbar-brand",to:"/"},"Recipes"),a?l.a.createElement("span",{className:"navbar-text float-left mr-2 d-sm-inline d-md-none"},"Welcome, ",t.name.givenName):l.a.createElement(l.a.Fragment,null),l.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},l.a.createElement("ul",{className:"navbar-nav mr-auto"},l.a.createElement("li",{className:"nav-item"},l.a.createElement("span",{"data-toggle":"collapse","data-target":".navbar-collapse.show"},l.a.createElement(i.b,{className:"nav-link",to:"/"},"Home"))),a?l.a.createElement(l.a.Fragment,null,l.a.createElement("li",{className:"nav-item"},l.a.createElement("span",{"data-toggle":"collapse","data-target":".navbar-collapse.show"},l.a.createElement(i.b,{className:"nav-link",to:"/profile"},"Profile"))),l.a.createElement("li",{className:"nav-item"},l.a.createElement("span",{"data-toggle":"collapse","data-target":".navbar-collapse.show"},l.a.createElement(i.b,{className:"nav-link",to:"/createRecipe"},"Create Recipe")))):l.a.createElement("span",null)),a?l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"navbar-text mr-2 d-none d-md-inline"},"Welcome, ",t.name.givenName),l.a.createElement("span",{"data-toggle":"collapse","data-target":".navbar-collapse.show"},l.a.createElement(i.b,{className:"btn btn-secondary my-2 my-sm-0",to:"/logout"},"Logout"))):l.a.createElement("span",{"data-toggle":"collapse","data-target":".navbar-collapse.show"},l.a.createElement(i.b,{className:"btn btn-secondary my-2 my-sm-0",to:"/login"},"Login"))))},y=function(e){var t=e.url,a=e.setAuthenticated,c=Object(n.useState)(""),r=Object(s.a)(c,2),o=r[0],m=r[1];return Object(n.useEffect)((function(){fetch("".concat(t,"/api/logout"),{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0}}).then((function(e){if(console.log("response: ".concat(e)),200===e.status)return e.json();throw new Error("failed to authenticate user")})).then((function(e){m(e.message),a(!1)})).catch((function(e){console.log(e)}))}),[]),l.a.createElement("div",{className:"container",style:{height:"80vh"}},l.a.createElement("div",{className:"alert alert-success"},o,l.a.createElement(i.b,{className:"ml-3 btn btn-primary",to:"/"},"Return to Home Page")))},O=function(){return l.a.createElement("div",{className:"container mt-3 text-center mb-3"},l.a.createElement("hr",null),l.a.createElement("p",null,"Website by Cam Gallucci 2020"),l.a.createElement("a",{href:"http://spoonacular.com"},"View API used"),l.a.createElement("span",null,"\xa0\xa0|\xa0\xa0"),l.a.createElement("a",{href:"http://github.com/cgallucci99/NodeProject"},"View Github"))},w=a(24),S=a(23),x=a.n(S),C=function(e){var t=e.url,a=(e.user,e.authenticated),c=Object(n.useState)([]),r=Object(s.a)(c,2),i=r[0],o=r[1],m=Object(n.useState)(""),u=Object(s.a)(m,2),d=(u[0],u[1],Object(n.useState)("")),p=Object(s.a)(d,2);p[0],p[1];return a?l.a.createElement("div",{className:"container mt-5"},l.a.createElement("form",{method:"POST",action:t+"/api/createRecipe"},l.a.createElement("div",{className:"form-group row"},l.a.createElement("div",{className:"col-md-1 col-form-label"},l.a.createElement("label",{htmlFor:"title"},"Title")),l.a.createElement("div",{className:"col-md-3 "},l.a.createElement("input",{type:"text",className:"form-control",placeholder:"Title of recipe",id:"title",name:"title"})),l.a.createElement("div",{className:"col-md-1 col-form-label"},l.a.createElement("label",{htmlFor:"time"},"Time")),l.a.createElement("div",{className:"col-md-3 "},l.a.createElement("input",{type:"text",className:"form-control",placeholder:"Time in minutes",id:"time",name:"time"})),l.a.createElement("div",{className:"col-md-1 col-form-label"},l.a.createElement("label",{htmlFor:"servings"},"Servings")),l.a.createElement("div",{className:"col-md-3 "},l.a.createElement("input",{type:"text",className:"form-control",placeholder:"Servings made by recipe",id:"servings",name:"servings"}))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"ingredients"},"Ingredients"),l.a.createElement("textarea",{className:"form-control",placeholder:"Separate ingredients on new lines",id:"ingredients",name:"ingredients",rows:50,style:{height:"100px"}})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"instructions"},"Instructions"),l.a.createElement("textarea",{className:"form-control",placeholder:"Separate instrucions on new lines",id:"instructions",name:"instructions",rows:50,style:{height:"100px"}})),l.a.createElement(x.a,{withIcon:!0,onChange:function(e){o([].concat(Object(w.a)(i),[e]))},imgExtension:[".jpg",".png"],maxFileSize:5e6,name:"image",label:"Upload an image. Max file size 5MB",singleImage:!0,withPreview:!0}),l.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"))):l.a.createElement("div",{className:"container mt-5"},l.a.createElement("h2",null,"Please log in"))};var R=function(){var e,t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],r=a[1],u=Object(n.useState)({}),d=Object(s.a)(u,2),p=d[0],E=d[1],h=Object(n.useState)([]),b=Object(s.a)(h,2),v=b[0],w=b[1],S=Object(n.useState)(null),x=Object(s.a)(S,2),R=x[0],F=x[1],k=Object(n.useState)(!1),T=Object(s.a)(k,2),A=T[0],I=T[1];return e="http://ec2-13-59-8-125.us-east-2.compute.amazonaws.com",Object(n.useEffect)((function(){fetch("".concat(e,"/api/auth/login/success"),{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0}}).then((function(e){if(200===e.status)return e.json();throw new Error("failed to authenticate user")})).then((function(e){I(!0),r(e.user._id),E(e.user.name),w(e.user.recipeIDs)})).catch((function(e){I(!1),F("Failed to authenticate user"),console.log(R)}))}),[]),l.a.createElement(i.a,null,l.a.createElement(j,{user:{name:p,id:c,recipes:v},authenticated:A}),l.a.createElement(o.c,null,l.a.createElement(o.a,{path:"/",component:m,exact:!0}),l.a.createElement(o.a,{path:"/search",render:function(t){return l.a.createElement(g,Object.assign({},t,{url:e,user:{name:p,id:c,recipes:v},authenticated:A,setUserRecipes:w}))}}),l.a.createElement(o.a,{path:"/login",render:function(t){return l.a.createElement(f,Object.assign({},t,{url:e}))}}),l.a.createElement(o.a,{path:"/profile",render:function(t){return l.a.createElement(N,Object.assign({},t,{url:e,user:{name:p,id:c,recipes:v},authenticated:A,setUserRecipes:w}))}}),l.a.createElement(o.a,{path:"/logout",render:function(t){return l.a.createElement(y,{url:e,setAuthenticated:I})}}),l.a.createElement(o.a,{path:"/createRecipe",render:function(t){return l.a.createElement(C,Object.assign({},t,{url:e,user:{name:p,id:c,recipes:v},authenticated:A}))}})),l.a.createElement(O,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[25,1,2]]]);
//# sourceMappingURL=main.89eb0dbe.chunk.js.map
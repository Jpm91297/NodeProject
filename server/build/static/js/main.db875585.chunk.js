(this.webpackJsonprecipes=this.webpackJsonprecipes||[]).push([[0],{21:function(e,t,a){e.exports=a(63)},26:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(18),l=a.n(r),s=(a(26),a(1)),i=a(8),o=a(3),m=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],r=t[1];return c.a.createElement("div",{id:"homepage",className:"text-center",style:{height:"95vh"}},c.a.createElement("div",{className:"jumbotron"},c.a.createElement("h2",{className:"mt-5 display-4"},"Welcome to the Recipes Home Page!"),c.a.createElement("p",{className:"lead"},"Search for recipes, add them to your profile, and more!"),c.a.createElement("hr",{className:"w-50"}),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-3"}),c.a.createElement("div",{className:"col-6"},c.a.createElement("form",{className:"",action:"/search",method:"GET"},c.a.createElement("div",{className:"input-group mx-auto"},c.a.createElement("input",{value:a,name:"search",onChange:function(e){return r(e.target.value)},type:"text",className:"form-control",placeholder:"Enter your search"}),c.a.createElement("div",{className:"input-group-append"},c.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Search"))))),c.a.createElement("div",{className:"col-3"}))))},u=a(19),d=a.n(u),p=function(e){var t=e.user,a=e.authenticated,r=e.id,l=e.setUserRecipes,i=Object(n.useState)(!1),o=Object(s.a)(i,2),m=o[0],u=o[1];return Object(n.useEffect)((function(){-1!==t.recipes.indexOf(r)&&u(!0)}),[t,r]),c.a.createElement(c.a.Fragment,null,m?c.a.createElement("button",{className:"float-right mr-2 btn btn-secondary",disabled:!0},"Already added"):c.a.createElement(c.a.Fragment,null,a?c.a.createElement("button",{className:"float-right mr-2 btn btn-primary",onClick:function(){fetch("http://localhost:8000/addRecipe",{method:"post",body:JSON.stringify({recipe:r}),credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0}}).then((function(e){return e.json()})).then((function(e){"fail"===e.message?console.log("failed to add"):(l(e.user.recipeIDs),u(!0))})).catch((function(e){console.log(e)}))}},"Add to personal recipes"):c.a.createElement("span",null)))},E=function(e){var t=e.recipe;return c.a.createElement("div",{className:"media"},c.a.createElement("img",{className:"mr-3",height:"100px;",src:t.image}),c.a.createElement("div",{className:"media-body"},c.a.createElement("h5",{className:"mt-0"},t.title),c.a.createElement("p",{className:""},"Ready in ",t.readyInMinutes," minutes. Serves ",t.servings),c.a.createElement("div",{className:"btn-group mb-1"},c.a.createElement("a",{className:"btn btn-primary",href:t.sourceUrl},"View Recipe Site"),c.a.createElement("button",{className:"btn btn-primary","data-toggle":"collapse","data-target":"#collapse"+t.id},"View More Details"),c.a.createElement("button",{className:"btn btn-primary","data-toggle":"collapse","data-target":"#collapsetwo"+t.id},"View Nutrition")),c.a.createElement("div",{id:"accordion"+t.id},c.a.createElement("div",{className:"collapse",id:"collapse"+t.id,"data-parent":"#accordion"+t.id},c.a.createElement("div",{className:"card card-body"},c.a.createElement("p",{dangerouslySetInnerHTML:{__html:t.summary}}))),c.a.createElement("div",{className:"collapse",id:"collapsetwo"+t.id,"data-parent":"#accordion"+t.id},c.a.createElement("div",{className:"card card-body"},c.a.createElement("table",{className:"table"},c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("td",null,"Calories:"),c.a.createElement("td",null,t.nutrition.nutrients[0].amount)),c.a.createElement("tr",null,c.a.createElement("td",null,"Fat:"),c.a.createElement("td",null,t.nutrition.nutrients[1].amount," ",t.nutrition.nutrients[1].unit)),c.a.createElement("tr",null,c.a.createElement("td",null,"Saturated Fat:"),c.a.createElement("td",null,t.nutrition.nutrients[2].amount," ",t.nutrition.nutrients[2].unit)),c.a.createElement("tr",null,c.a.createElement("td",null,"Carbohydrates:"),c.a.createElement("td",null,t.nutrition.nutrients[3].amount," ",t.nutrition.nutrients[3].unit)),c.a.createElement("tr",null,c.a.createElement("td",null,"Sugar:"),c.a.createElement("td",null,t.nutrition.nutrients[5].amount," ",t.nutrition.nutrients[5].unit)),c.a.createElement("tr",null,c.a.createElement("td",null,"Cholesterol:"),c.a.createElement("td",null,t.nutrition.nutrients[6].amount," ",t.nutrition.nutrients[6].unit)),c.a.createElement("tr",null,c.a.createElement("td",null,"Sodium:"),c.a.createElement("td",null,t.nutrition.nutrients[7].amount," ",t.nutrition.nutrients[7].unit)),c.a.createElement("tr",null,c.a.createElement("td",null,"Protein:"),c.a.createElement("td",null,t.nutrition.nutrients[8].amount," ",t.nutrition.nutrients[8].unit)))))))))},h=a(10),b=a.n(h),f=function(e){var t=e.user,a=e.authenticated,r=e.setUserRecipes,l=Object(n.useState)({results:[]}),i=Object(s.a)(l,2),m=i[0],u=i[1],h=Object(n.useState)(!1),f=Object(s.a)(h,2),g=f[0],v=f[1],N=Object(n.useState)(!0),j=Object(s.a)(N,2),y=j[0],O=j[1],w=Object(n.useState)(0),S=Object(s.a)(w,2),C=S[0],R=S[1],x=d.a.parse(Object(o.f)().search).search,A=function(e){v(!1),fetch("https://api.spoonacular.com/recipes/complexSearch?query=".concat(e,"&number=5&offset=").concat(C,"&apiKey=b4eb8132e6de41dbae752d1fd776be77&addRecipeNutrition=true&addRecipeInformation=true")).then((function(e){return e.json()})).then((function(e){if(402===e.code)throw new Error;u(e),O(!1)})).catch((function(e){v(!0)})),R(C+5)};return Object(n.useEffect)((function(){O(!0),A(x)}),[x]),y?(console.log("loading"),c.a.createElement("div",{className:"container clearfix"},c.a.createElement("h2",{className:"text-center"},"Loading Results: "),c.a.createElement("div",{className:"d-flex justify-content-center"},c.a.createElement(b.a,{type:"TailSpin",color:"#000000",height:100,width:100})))):c.a.createElement("div",{className:"container clearfix"},c.a.createElement("h2",{className:"text-center"},'Showing Results for "',x,'": '),y?c.a.createElement("p",null,"Loading . . ."):c.a.createElement(c.a.Fragment,null,g?c.a.createElement("p",null,"there was and error"):c.a.createElement(c.a.Fragment,null,c.a.createElement("ul",{className:"list-group"},m.results.map((function(e,n){return c.a.createElement("li",{key:n,className:"list-group-item "},c.a.createElement(E,{recipe:e}),c.a.createElement(p,{user:t,authenticated:a,id:e.id,setUserRecipes:r}))}))),c.a.createElement("button",{className:"btn btn-primary float-right mt-2 mr-4",onClick:function(){return A(x)}},"See More Results"))))},g=function(){return c.a.createElement("div",{className:"container",style:{height:"80vh"}},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-3"}),c.a.createElement("div",{className:"col-6"},c.a.createElement("h2",null,"Welcome to Recipes!"),c.a.createElement("p",null,"Login to gain access to saving recipes and more!"),c.a.createElement("button",{className:"btn btn-primary",onClick:function(){window.open("http://localhost:8000/api/auth/google","_self")}},"Sign in with google")),c.a.createElement("div",{className:"col-3"})))},v=function(e){var t=e.id,a=e.setUserRecipes,r=Object(n.useState)(!1),l=Object(s.a)(r,2),i=l[0],o=l[1];return c.a.createElement(c.a.Fragment,null,i?c.a.createElement("button",{className:"float-right mr-2 btn btn-secondary btn-sm",disabled:!0},"Removed"):c.a.createElement("button",{className:"float-right mr-2 btn btn-danger btn-sm",onClick:function(){fetch("http://localhost:8000/api/removeRecipe",{method:"post",body:JSON.stringify({recipe:t}),credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0}}).then((function(e){return e.json()})).then((function(e){"fail"===e.message?console.log("failed to remove"):(a(e.user.recipeIDs),o(!0))})).catch((function(e){console.log(e)}))}},"Remove"))},N=function(e){var t=e.user,a=e.authenticated,r=e.setUserRecipes,l=Object(n.useState)([]),i=Object(s.a)(l,2),o=i[0],m=i[1],u=Object(n.useState)(!1),d=Object(s.a)(u,2),p=d[0],h=d[1],f=Object(n.useState)(!1),g=Object(s.a)(f,2),N=g[0],j=g[1],y=Object(n.useState)(!1),O=Object(s.a)(y,2),w=O[0],S=O[1];return c.a.createElement("div",{className:"container",style:w?{height:"100%"}:{height:"95vh"}},a?c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",{className:"text-center"},"Welcome, ",t.name.givenName),w?c.a.createElement("span",null):c.a.createElement("button",{className:"btn btn-primary",onClick:function(){if(0!==t.recipes.length){S(!0),h(!0);var e="";t.recipes.forEach((function(a,n){n===t.recipes.length-1?e+=a:e+=a+","})),fetch("https://api.spoonacular.com/recipes/informationBulk?ids=".concat(e,"&apiKey=b4eb8132e6de41dbae752d1fd776be77&includeNutrition=true")).then((function(e){return e.json()})).then((function(e){if(402===e.code||400===e.code)throw new Error;m(e),h(!1)})).catch((function(e){console.log("err fetching from api"),j(!0)}))}}},"View Saved Recipes")):c.a.createElement("h1",{className:"text-center"},"Welcome, please login to view profile"),w?c.a.createElement("ul",{id:"recipe-list",className:"list-group mt-3"},N?c.a.createElement("p",null,"there was an error"):c.a.createElement(c.a.Fragment,null,p?c.a.createElement("div",{className:"d-flex justify-content-center"},c.a.createElement(b.a,{type:"TailSpin",color:"#000000",height:100,width:100})):o.map((function(e,t){return c.a.createElement("li",{key:t,className:"list-group-item"},c.a.createElement(E,{recipe:e}),c.a.createElement(v,{id:e.id,setUserRecipes:r}))})))):c.a.createElement("span",null))},j=function(e){var t=e.user,a=e.authenticated;return c.a.createElement("nav",{className:"navbar sticky-top navbar-expand-lg navbar-light"},c.a.createElement(i.b,{className:"navbar-brand",to:"/"},"Recipes"),c.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},c.a.createElement("span",{className:"navbar-toggler-icon"})),c.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},c.a.createElement("ul",{className:"navbar-nav mr-auto"},c.a.createElement("li",{className:"nav-item"},c.a.createElement(i.b,{className:"nav-link",to:"/"},"Home")),a?c.a.createElement("li",{className:"nav-item"},c.a.createElement(i.b,{className:"nav-link",to:"/profile"},"Profile")):c.a.createElement("span",null)),a?c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:"navbar-text mr-2"},"Welcome, ",t.name.givenName),c.a.createElement(i.b,{className:"btn btn-secondary my-2 my-sm-0",to:"/logout"},"Logout")):c.a.createElement(i.b,{className:"btn btn-secondary my-2 my-sm-0",to:"/login"},"Login")))},y=function(e){var t=e.setAuthenticated,a=Object(n.useState)(""),r=Object(s.a)(a,2),l=r[0],o=r[1];return Object(n.useEffect)((function(){fetch("http://localhost:8000/api/logout",{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0}}).then((function(e){if(console.log("response: ".concat(e)),200===e.status)return e.json();throw new Error("failed to authenticate user")})).then((function(e){o(e.message),t(!1)})).catch((function(e){console.log(e)}))}),[]),c.a.createElement("div",{className:"container",style:{height:"80vh"}},c.a.createElement("div",{className:"alert alert-success"},l,c.a.createElement(i.b,{className:"ml-3 btn btn-primary",to:"/"},"Return to Home Page")))},O=function(){return c.a.createElement("div",{className:"container mt-3 text-center mb-3"},c.a.createElement("hr",null),c.a.createElement("p",null,"Website by Cam Gallucci 2020"),c.a.createElement("a",{href:"http://spoonacular.com"},"View API used"),c.a.createElement("span",null,"\xa0\xa0|\xa0\xa0"),c.a.createElement("a",{href:"http://github.com/cgallucci99/NodeProject"},"View Github"))};var w=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)({}),u=Object(s.a)(l,2),d=u[0],p=u[1],E=Object(n.useState)([]),h=Object(s.a)(E,2),b=h[0],v=h[1],w=Object(n.useState)(null),S=Object(s.a)(w,2),C=S[0],R=S[1],x=Object(n.useState)(!1),A=Object(s.a)(x,2),k=A[0],F=A[1];return Object(n.useEffect)((function(){fetch("http://localhost:8000/api/auth/login/success",{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0}}).then((function(e){if(200===e.status)return e.json();throw new Error("failed to authenticate user")})).then((function(e){F(!0),r(e.user._id),p(e.user.name),v(e.user.recipeIDs)})).catch((function(e){F(!1),R("Failed to authenticate user"),console.log(C)}))}),[]),c.a.createElement(i.a,null,c.a.createElement(j,{user:{name:d,id:a,recipes:b},authenticated:k}),c.a.createElement(o.c,null,c.a.createElement(o.a,{path:"/",component:m,exact:!0}),c.a.createElement(o.a,{path:"/search",render:function(e){return c.a.createElement(f,Object.assign({},e,{user:{name:d,id:a,recipes:b},authenticated:k,setUserRecipes:v}))}}),c.a.createElement(o.a,{path:"/login",component:g}),c.a.createElement(o.a,{path:"/profile",render:function(e){return c.a.createElement(N,Object.assign({},e,{user:{name:d,id:a,recipes:b},authenticated:k,setUserRecipes:v}))}}),c.a.createElement(o.a,{path:"/logout",render:function(e){return c.a.createElement(y,{setAuthenticated:F})}})),c.a.createElement(O,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[21,1,2]]]);
//# sourceMappingURL=main.db875585.chunk.js.map